<div class="refiner refiner--simple" [class.refiner--open]="isOpen" [class.refiner--closed]="!isOpen">
	<div class="refiner__section refiner__header" (click)="toggleOpen()">
		<div class="media media--clickable">
			<div class="media__body">
				<h3 class="refiner__title">{{ refiner.title }}</h3>
			</div>
			<div class="refiner__toggle | media__right media--align-center">
				<fa-icon [icon]="faChevronDown"></fa-icon>
				<span class="sr-only">Expand {{ refiner.title }} refiner</span>
			</div>
		</div>
	</div>
	<!-- ./refiner__section -->
	<!--Input Box section-->
	<div class="search__window">
		<input
			type="text"
			class="search__window-value"
			[(ngModel)]="query"
			[placeholder]="labelPlaceholder"
			[class.search__window-value--placeholder]="query === ''"
			(keyup)="keyUp($event)"
		/>

		<button
			class="search__window-action"
			*ngIf="query !== ''"
			[style.color]="clearIconColor"
			(click)="clear()"
		>
			<span class="sr-only">{{ labelClear }}</span>
			<fa-icon [icon]="clearIcon"></fa-icon>
		</button>
	</div>

	<!-- [@blockInitialAnimation -->
	<div class="refiner__section refiner__toggleable">
		<!-- [@optionsInOut -->
		<div *ngIf="isOpen" class="refiner__section refiner__body">
			<div class="refiner__section refiner__selection-toggles">
				<button (click)="selectNone()" *ngIf="canSelectNone()" class="refiner__select-none">
					{{ selectNoneLabel }}
				</button>
				<button (click)="selectAll()" *ngIf="canSelectAll()" class="refiner__select-all">
					{{ selectAllLabel }}
				</button>
			</div>
			<!-- /.refiner__selection-toggles -->
			<div class="refiner__container refiner__scroll">
				<ng-container *ngIf="!showNoResults; else NoResults">
					<div class="refiner__section">
						<ul class="options">
							<li class="option" *ngFor="let optionKey of selectedOptionKeys">
								<label class="media media--align-items-center">
									<div class="media__left">
										<input
											type="checkbox"
											name="refiner-{{ refiner.slug }}"
											value="{{ optionKey }}"
											[(ngModel)]="values[optionKey]"
											(change)="onSelectionChange(optionKey, values[optionKey])"
										/>
									</div>
									<div class="media__body">
										<porcelain-truncate
											[value]="getOptionLabel(refiner.options[optionKey])"
											[CharacterHighlighter]="query"
										></porcelain-truncate>
									</div>
									<div
										class="media__right"
										*ngIf="optionHasBadge(refiner.options[optionKey])"
									>
										<div class="option__badge">
											{{ getOptionBadge(refiner.options[optionKey]) }}
										</div>
									</div>
								</label>
							</li>
						</ul>
					</div>

					<div class="refiner__section">
						<ul class="options">
							<li class="option" *ngFor="let optionKey of filteredUnselectedOptionKeys">
								<label class="media media--align-items-center">
									<div class="media__left">
										<input
											type="checkbox"
											name="refiner-{{ refiner.slug }}"
											value="{{ optionKey }}"
											[(ngModel)]="values[optionKey]"
											(change)="onSelectionChange(optionKey, values[optionKey])"
										/>
									</div>
									<div class="media__body">
										<porcelain-truncate
											[value]="getOptionLabel(refiner.options[optionKey])"
											[CharacterHighlighter]="query"
										></porcelain-truncate>
									</div>
									<div
										class="media__right"
										*ngIf="optionHasBadge(refiner.options[optionKey])"
									>
										<div class="option__badge">
											{{ getOptionBadge(refiner.options[optionKey]) }}
										</div>
									</div>
								</label>
							</li>
						</ul>
					</div>
				</ng-container>
				<ng-template #NoResults>
					<span
						class="option__no_results"
						innerHtml="{{ diplayNoResultsMessage || 'No results found' }}"
					></span>
				</ng-template>
			</div>
			<!-- ./refiner__options-->
			<ng-container *ngIf="isRefinerButtonDisplay">
				<div class="refiner__section refiner__show-hide" *ngIf="canExpand()">
					<button (click)="toggleExpanded()" class="refiner__expand-toggle">
						<span *ngIf="isExpanded">
							{{ showLessLabel | sprintf: countTail() }}
							<fa-icon [icon]="contractIcon"></fa-icon>
						</span>
						<span *ngIf="!isExpanded">
							{{ showMoreLabel | sprintf: countTail() }}
							<fa-icon [icon]="expandIcon"></fa-icon>
						</span>
					</button>
				</div>
			</ng-container>
			<!-- /.refiner__show-hide -->
		</div>
		<!-- /.refiner__body -->
	</div>
	<!-- /ng-container -->
</div>
